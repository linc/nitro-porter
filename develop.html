
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="migrations.html">
      
      
        <link rel="next" href="maintain.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Add a Package - Nitro Porter</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="assets/external/unpkg.com/iframe-worker/shim.js"></script>
      
    
    
      
        
        
        
        <link rel="stylesheet" href="assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/porter.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#developer-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Nitro Porter" class="md-header__button md-logo" aria-label="Nitro Porter" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nitro Porter
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Add a Package
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/prosembler/nitro-porter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="guide.html" class="md-tabs__link">
          
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="sources.html" class="md-tabs__link">
          
  
  Packages

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="contribute.html" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Nitro Porter" class="md-nav__button md-logo" aria-label="Nitro Porter" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Nitro Porter
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/prosembler/nitro-porter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run a Migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="migrations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prepare Your Community
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Add a Package
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="develop.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Add a Package
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#porter-format" class="md-nav__link">
    <span class="md-ellipsis">
      Porter Format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Porter Format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations-regarding-porter-format" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations regarding Porter Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-source" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new Source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a new Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maps-and-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Maps and filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-export" class="md-nav__link">
    <span class="md-ellipsis">
      Using export()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requiring-tables-and-columns" class="md-nav__link">
    <span class="md-ellipsis">
      Requiring tables and columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-target" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new Target
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a new Target">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verify-source-support-for-each-feature" class="md-nav__link">
    <span class="md-ellipsis">
      Verify source support for each feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-import" class="md-nav__link">
    <span class="md-ellipsis">
      Using import()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-postscript" class="md-nav__link">
    <span class="md-ellipsis">
      Using a Postscript
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Writing integration tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing integration tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-schema-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Create a schema migration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-database-connections" class="md-nav__link">
    <span class="md-ellipsis">
      Working with database connections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-mysql-help" class="md-nav__link">
    <span class="md-ellipsis">
      Non-MySQL help
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Non-MySQL help">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mssql-conversions" class="md-nav__link">
    <span class="md-ellipsis">
      MSSQL conversions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="maintain.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maintain Nitro Porter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="domain.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Domain Concepts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Packages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Packages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sources.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="targets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Targets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="contribute.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="history.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#porter-format" class="md-nav__link">
    <span class="md-ellipsis">
      Porter Format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Porter Format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations-regarding-porter-format" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations regarding Porter Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-source" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new Source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a new Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maps-and-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Maps and filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-export" class="md-nav__link">
    <span class="md-ellipsis">
      Using export()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requiring-tables-and-columns" class="md-nav__link">
    <span class="md-ellipsis">
      Requiring tables and columns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-target" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new Target
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a new Target">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verify-source-support-for-each-feature" class="md-nav__link">
    <span class="md-ellipsis">
      Verify source support for each feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-import" class="md-nav__link">
    <span class="md-ellipsis">
      Using import()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-postscript" class="md-nav__link">
    <span class="md-ellipsis">
      Using a Postscript
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Writing integration tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing integration tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-schema-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Create a schema migration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-database-connections" class="md-nav__link">
    <span class="md-ellipsis">
      Working with database connections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-mysql-help" class="md-nav__link">
    <span class="md-ellipsis">
      Non-MySQL help
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Non-MySQL help">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mssql-conversions" class="md-nav__link">
    <span class="md-ellipsis">
      MSSQL conversions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="developer-guide">Developer Guide</h1>
<p>Nitro Porter works in this order:</p>
<ol>
<li>The <strong>Source</strong> package translates the data to the intermediary "porter format" (see below). These are new database tables with the prefix <code>PORT_</code>.</li>
<li>The <strong>Target</strong> package translates the data to the final platform format. These can be existing tables from an installation, or it will create them new using the information provided.</li>
<li>If a <strong>Postscript</strong> file with the same name as the Target exists, it runs last. This is for doing calculations that require the data to have been fully transferred already, for example generating data that wasn't ever in the Source.</li>
</ol>
<p>The <code>Migration</code> is a process model that gets passed between every step in the process. It's instantiated as <code>$port</code> throughout the code.</p>
<p>Use its <code>comment()</code> method for logging. Open <code>porter.log</code> in your favorite log reader for realtime feedback.</p>
<h2 id="porter-format">Porter Format</h2>
<p>Nitro Porter uses a "porter format" roughly analogous to the database design of Vanilla Forums. 
That means all sources translate to Vanilla, and all targets translate from Vanilla. Doing this alleviates multiple challenges.</p>
<p>First, imagine 50 sources and 50 targets. Direct migrations would create exponential complexity (50:50 = 2500 possible paths).
By using a dedicated intermediary, complexity is significantly constrained (50:1 and 1:50, so that only 100 paths are possible).</p>
<p>Second, many forum database designs are difficult to interpret and/or very strict in their data structure. 
Vanilla's is fairly sensible and serves as a good reference. It was also designed for easy import.</p>
<p>Third, Nitro Porter's origin is as a Vanilla migration tool, so it preserves backwards compatibility for the original sources.</p>
<h3 id="considerations-regarding-porter-format">Considerations regarding Porter Format</h3>
<p>One common issue with this Porter Format is that the original post's body is attached directly to the discussion record.
A majority of forums instead associate a generic post/comment record as the "first", and the discussion record contains only the title. 
Nitro Porter uses the <code>getDiscussionBodyMode()</code> method to skip the overhead of doing this conversion if both the source and target use this alternative structure.</p>
<p>Private messages in Vanilla function as a discussion with an allowlist of participants. 
There is no consideration of when a user was added to a private message chain. It does not support PM organization in any way.</p>
<h2 id="add-a-new-source">Add a new Source</h2>
<p><strong>New sources will be automatically detected at runtime and added as options.</strong></p>
<ol>
<li>Copy and rename <code>src/Source/Example.php</code>.</li>
<li>Edit the <code>SUPPORTED</code> data array, following the inline comments.</li>
<li>The basic types of data are stubbed out, one per method. Follow the inline docs.</li>
</ol>
<p>Source packages are invoked by their <code>run()</code> method. It must call any methods you add in the order you want.</p>
<p>Typically, Sources do NOT reformat user generated content (UGC) and simply label how it is formatted on the relevant records (e.g. setting <code>Comment.Format</code> to 'BBCode' or 'HTML').</p>
<h3 id="maps-and-filters">Maps and filters</h3>
<p>Use a <code>$map</code> array to directly translate a column name in one database to another. Need the data transformed? You can use a function. Pass an array like <code>['Column' =&gt; 'Name', 'Filter' =&gt; 'HTMLDecoder']</code> and the <code>Name</code> column's value will be passed to the function <code>HTMLDecoder()</code> (along with the rest of the data in the row) for manipulation and the return value will be stored instead of the original. Use the <code>src/Functions/filter.php</code> for adding new filters.</p>
<h3 id="using-export">Using export()</h3>
<p>The <code>Migration::export()</code> call is what does the data transfer. The <code>$query</code> parameter must at least select all the columns in the <code>$map</code> array for it to work. Use the table prefix <code>:_</code> for it to be dynamically replaced per the user's input.</p>
<h3 id="requiring-tables-and-columns">Requiring tables and columns</h3>
<p>You can use the <code>$sourceTables</code> property to require certain tables and columns in the source database, but it's optional.</p>
<h2 id="add-a-new-target">Add a new Target</h2>
<ol>
<li>Copy and rename <code>src/Target/Example.php</code>.</li>
<li>Edit the <code>SUPPORTED</code> data array, following the inline comments.</li>
<li>The basic types of data are stubbed out, one per method. Follow the inline docs.</li>
</ol>
<p>Target packages first have their <code>validate()</code> method called, then their <code>run()</code> method.</p>
<p>To confirm an optional data type exists before importing it, use <code>targetExists()</code> on the <code>Migration</code>.</p>
<p>It is often necessary to reformat user generated content (UGC), like comments, during the import. See the <code>Formatter</code> class.</p>
<h3 id="verify-source-support-for-each-feature">Verify source support for each feature</h3>
<p>It's not safe to assume every <code>PORT_</code> table will be present because not all source packages provide all types of feature data.</p>
<p>These tables should always be present: <code>PORT_User</code>, <code>PORT_Discussion</code>, <code>PORT_Comment</code>, and <code>PORT_Category</code>.</p>
<p>For all others, check if the table exists. Example:</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x">        // Verify support.</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="x">        if (!$ex-&gt;targetExists(&#39;PORT_FeatureName&#39;)) {</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="x">            $ex-&gt;comment(&#39;Skipping import: FeatureName (Source lacks support)&#39;);</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="x">            return;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="x">        }</span>
</span></code></pre></div>
<p>Generally tables come in bundles. For instance, there's little use for <code>PORT_Role</code> if <code>PORT_UserRole</code> is not also present. Checking for one is usually sufficient.</p>
<h3 id="using-import">Using import()</h3>
<p>The <code>import()</code> method works a bit more cleanly than the <code>export()</code> method. It takes a map array, but also accepts a built SQL statement rather than a query string. It requires defining the target database table structure, and separates filters into their own array for clarity. Use <code>$ex-&gt;dbImport()</code> to build the SQL statement.</p>
<p>If a column isn't present in the structure passed to <code>import()</code>, it will be ignored entirely.</p>
<h3 id="using-a-postscript">Using a Postscript</h3>
<p>Simply add a new PHP class to the <code>src/Postscript</code> folder with the same name as the Target and a method named <code>run()</code>. It will automatically run after the import. Its <code>storage</code> property will get set with the database connection automatically.</p>
<h2 id="writing-integration-tests">Writing integration tests</h2>
<h3 id="create-a-schema-migration">Create a schema migration</h3>
<p>Refer to the <a href="https://book.cakephp.org/phinx/0/en/index.html" rel="nofollow">Phinx docs</a> for creating schema migrations for integration tests.</p>
<p>To create a schema migration from an existing database (rather than hand-coding it from scratch), you need to also use Cake.
(This works because Phinx is a spin-off project from Cake, so the framework creates compatible migrations in this scenario.)</p>
<ol>
<li>Create a new Cake project: <code>composer create-project --prefer-dist cakephp/app:~4.0 some_folder</code></li>
<li>Add the database creds in: <code>path_to/some_folder/config/app_local.php</code></li>
<li>Run a Cake snapshot: <code>path_to/some_folder/bin/cake bake migration_snapshot SomeName</code></li>
<li>Copy the new file created in <code>path_to/some_folder/config/Migrations</code> to Porter's test folder structure in <code>tests/integration/migrations/{PackageName}</code>.</li>
</ol>
<p>From there, you can edit it and refer to it like other integration tests.</p>
<h2 id="working-with-database-connections">Working with database connections</h2>
<p>Nitro Porter uses the <a href="https://github.com/illuminate/database" rel="nofollow">Laravel Illuminate</a> database driver. Refer to its <a href="https://laravel.com/docs/9.x" rel="nofollow">documentation</a> for help.</p>
<p>While Nitro Porter reuses an existing database connection wherever possible, it defaults to using an unbuffered query for speed, and it will often be advisable to use the driver's <code>cursor()</code> method to stream the results.</p>
<p>You need a second, separate database connection to do other queries while unbuffered results are streaming. The streaming connection is effectively mid-query. While this rarely comes up in <strong>Source</strong> packages since they are simply dumping information and the <strong>Target</strong> package usually abstracts away much of this work, it can get tricky when complex <strong>Postscript</strong> operations are necessary. Refer to the <code>Flarum</code> Postscript for examples.</p>
<h2 id="non-mysql-help">Non-MySQL help</h2>
<h3 id="mssql-conversions">MSSQL conversions</h3>
<p>If you need to migrate from MSSQL with a <code>.bak</code> file (e.g. from AspPlayground) and you're working on an M1 Macbook Pro, <a href="https://lincolnwebs.com/mssql-macos/" rel="nofollow">this guide will help</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["search.suggest", "search.highlight", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.sections"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="assets/external/unpkg.com/mermaid@10.7.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>